"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[568],{3905:function(e,n,a){a.d(n,{Zo:function(){return c},kt:function(){return m}});var i=a(67294);function t(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function l(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,i)}return a}function s(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?l(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function r(e,n){if(null==e)return{};var a,i,t=function(e,n){if(null==e)return{};var a,i,t={},l=Object.keys(e);for(i=0;i<l.length;i++)a=l[i],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)a=l[i],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var o=i.createContext({}),d=function(e){var n=i.useContext(o),a=n;return e&&(a="function"==typeof e?e(n):s(s({},n),e)),a},c=function(e){var n=d(e.components);return i.createElement(o.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},u=i.forwardRef((function(e,n){var a=e.components,t=e.mdxType,l=e.originalType,o=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),u=d(a),m=t,h=u["".concat(o,".").concat(m)]||u[m]||p[m]||l;return a?i.createElement(h,s(s({ref:n},c),{},{components:a})):i.createElement(h,s({ref:n},c))}));function m(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var l=a.length,s=new Array(l);s[0]=u;var r={};for(var o in n)hasOwnProperty.call(n,o)&&(r[o]=n[o]);r.originalType=e,r.mdxType="string"==typeof e?e:t,s[1]=r;for(var d=2;d<l;d++)s[d]=a[d];return i.createElement.apply(null,s)}return i.createElement.apply(null,a)}u.displayName="MDXCreateElement"},73206:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return r},contentTitle:function(){return o},metadata:function(){return d},toc:function(){return c},default:function(){return u}});var i=a(87462),t=a(63366),l=(a(67294),a(3905)),s=["components"],r={sidebar_position:3,sidebar_label:"Jobs"},o=void 0,d={unversionedId:"Engineering/DevOps/Automation Code Docs/CircleCI/Jobs",id:"Engineering/DevOps/Automation Code Docs/CircleCI/Jobs",title:"Jobs",description:"This is a list of all the reusable commands in CircleCI what they do.",source:"@site/docs/Engineering/DevOps/Automation Code Docs/CircleCI/Jobs.md",sourceDirName:"Engineering/DevOps/Automation Code Docs/CircleCI",slug:"/Engineering/DevOps/Automation Code Docs/CircleCI/Jobs",permalink:"/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/CircleCI/Jobs",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Jobs"},sidebar:"tutorialSidebar",previous:{title:"Commands",permalink:"/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/CircleCI/Commands"},next:{title:"Workflows",permalink:"/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/CircleCI/Workflows"}},c=[{value:"<code>lint</code>",id:"lint",children:[{value:"Description",id:"description",children:[],level:3},{value:"Image (see Images)",id:"image-see-images",children:[],level:3},{value:"Steps",id:"steps",children:[],level:3}],level:2},{value:"<code>test</code>",id:"test",children:[{value:"Description",id:"description-1",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-1",children:[],level:3},{value:"Steps",id:"steps-1",children:[],level:3}],level:2},{value:"<code>start_slack_thread</code>",id:"start_slack_thread",children:[{value:"Description",id:"description-2",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-2",children:[],level:3},{value:"Parameters",id:"parameters",children:[],level:3},{value:"Steps",id:"steps-2",children:[],level:3}],level:2},{value:"<code>build_ios_qa</code>",id:"build_ios_qa",children:[{value:"Description",id:"description-3",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-3",children:[],level:3},{value:"Steps",id:"steps-3",children:[],level:3}],level:2},{value:"<code>build_android_qa</code>",id:"build_android_qa",children:[{value:"Description",id:"description-4",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-4",children:[],level:3},{value:"Steps",id:"steps-4",children:[],level:3}],level:2},{value:"<code>build_ios_feature</code>",id:"build_ios_feature",children:[{value:"Description",id:"description-5",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-5",children:[],level:3},{value:"Steps",id:"steps-5",children:[],level:3}],level:2},{value:"<code>build_android_feature</code>",id:"build_android_feature",children:[{value:"Description",id:"description-6",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-6",children:[],level:3},{value:"Steps",id:"steps-6",children:[],level:3}],level:2},{value:"<code>cut_release_branch</code>",id:"cut_release_branch",children:[{value:"Description",id:"description-7",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-7",children:[],level:3},{value:"Steps",id:"steps-7",children:[],level:3}],level:2},{value:"<code>build_ios_release</code>",id:"build_ios_release",children:[{value:"Description",id:"description-8",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-8",children:[],level:3},{value:"Steps",id:"steps-8",children:[],level:3}],level:2},{value:"<code>build_android_release</code>",id:"build_android_release",children:[{value:"Description",id:"description-9",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-9",children:[],level:3},{value:"Steps",id:"steps-9",children:[],level:3}],level:2},{value:"<code>run_release_lanes</code>",id:"run_release_lanes",children:[{value:"Description",id:"description-10",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-10",children:[],level:3},{value:"Steps",id:"steps-10",children:[],level:3}],level:2},{value:"<code>build_android_release_candidate</code>",id:"build_android_release_candidate",children:[{value:"Description",id:"description-11",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-11",children:[],level:3},{value:"Steps",id:"steps-11",children:[],level:3}],level:2},{value:"<code>build_ios_release_candidate</code>",id:"build_ios_release_candidate",children:[{value:"Description",id:"description-12",children:[],level:3},{value:"Image (see Images)",id:"image-see-images-12",children:[],level:3},{value:"Steps",id:"steps-12",children:[],level:3}],level:2}],p={toc:c};function u(e){var n=e.components,a=(0,t.Z)(e,s);return(0,l.kt)("wrapper",(0,i.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"This is a list of all the reusable commands in CircleCI what they do."),(0,l.kt)("h2",{id:"lint"},(0,l.kt)("inlineCode",{parentName:"h2"},"lint")),(0,l.kt)("h3",{id:"description"},"Description"),(0,l.kt)("p",null,"This reusable job spins up an instance, installs dependencies and runs the lint command to check for lint errors. Should be run before builds and merges."),(0,l.kt)("h3",{id:"image-see-images"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"default"),(0,l.kt)("h3",{id:"steps"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- install_deps\n- lint\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"test"},(0,l.kt)("inlineCode",{parentName:"h2"},"test")),(0,l.kt)("h3",{id:"description-1"},"Description"),(0,l.kt)("p",null,"Reusable job that runs the Unit tests. This runs them with parallelism in order to complete them faster and runs on an x-large resource container."),(0,l.kt)("h3",{id:"image-see-images-1"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"default"),(0,l.kt)("h3",{id:"steps-1"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- install_deps\n- jest\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"start_slack_thread"},(0,l.kt)("inlineCode",{parentName:"h2"},"start_slack_thread")),(0,l.kt)("h3",{id:"description-2"},"Description"),(0,l.kt)("p",null,"Reusable job that sends a message to the va-mobile-app channel in DSVA slack and starts a thread to keep from cluttering the Slack feed."),(0,l.kt)("h3",{id:"image-see-images-2"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"default"),(0,l.kt)("h3",{id:"parameters"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"type"),(0,l.kt)("th",{parentName:"tr",align:null},"default?"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"message"),(0,l.kt)("td",{parentName:"tr",align:null},"String value of the message that will serve as the top of the thread in Slack channel"),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"none")))),(0,l.kt)("h3",{id:"steps-2"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- get_slack_channel_id:\n    channelName: 'va-mobile-app'\n- send_slack_message:\n    message: << parameters.message >>\n    channelId: ${SLACK_CHANNEL_ID}\n- save_slack_thread\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"build_ios_qa"},(0,l.kt)("inlineCode",{parentName:"h2"},"build_ios_qa")),(0,l.kt)("h3",{id:"description-3"},"Description"),(0,l.kt)("p",null,"Reusable job that runs the iOS build commands and is configured for daily QA builds."),(0,l.kt)("h3",{id:"image-see-images-3"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"ios"),(0,l.kt)("h3",{id:"steps-3"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- install_deps\n- decode_ios_keys\n- install_pods\n- bundle_app:\n    os: 'ios'\n- queue_ios_jobs\n- ios_fastlane\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"build_android_qa"},(0,l.kt)("inlineCode",{parentName:"h2"},"build_android_qa")),(0,l.kt)("h3",{id:"description-4"},"Description"),(0,l.kt)("p",null,"Reusable job that runs the Android build commands and is configured for daily QA builds."),(0,l.kt)("h3",{id:"image-see-images-4"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"android"),(0,l.kt)("h3",{id:"steps-4"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- install_deps\n- create_keys_directory\n- decode_android_keys\n- bundle_app:\n    os: 'android'\n- queue_android_jobs\n- android_fastlane\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"build_ios_feature"},(0,l.kt)("inlineCode",{parentName:"h2"},"build_ios_feature")),(0,l.kt)("h3",{id:"description-5"},"Description"),(0,l.kt)("p",null,"Reusable job that runs the iOS build commands and is configured to run off a tag. Release Notes will use the git tag to generate a readable string.\nSends all builds to the Development Team in Test Flight"),(0,l.kt)("h3",{id:"image-see-images-5"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"ios"),(0,l.kt)("h3",{id:"steps-5"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- install_deps\n- decode_ios_keys\n- install_pods\n- bundle_app:\n    os: ios\n- queue_ios_jobs\n- ios_fastlane:\n    lane: on_demand\n    notes: ${CIRCLE_TAG}\n    tf_group: Development Team\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"build_android_feature"},(0,l.kt)("inlineCode",{parentName:"h2"},"build_android_feature")),(0,l.kt)("h3",{id:"description-6"},"Description"),(0,l.kt)("p",null,"Reusable job that runs the Android build commands and is configured to run off a tag. Release Notes will use the git tag to generate a readable string.\nSends all builds to the Development Team track in the Play Store"),(0,l.kt)("h3",{id:"image-see-images-6"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"android"),(0,l.kt)("h3",{id:"steps-6"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- install_deps\n- create_keys_directory\n- decode_android_keys\n- bundle_app:\n    os: android\n- queue_android_jobs\n- android_fastlane:\n    lane: on_demand\n    notes: ${CIRCLE_TAG}\n    ps_track: Development Team\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"cut_release_branch"},(0,l.kt)("inlineCode",{parentName:"h2"},"cut_release_branch")),(0,l.kt)("h3",{id:"description-7"},"Description"),(0,l.kt)("p",null,"This reusable command calls the ",(0,l.kt)("inlineCode",{parentName:"p"},"release_branch.sh")," script in order to create a new branch to freeze for release."),(0,l.kt)("h3",{id:"image-see-images-7"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"default"),(0,l.kt)("h3",{id:"steps-7"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- run_script:\n    script_name: 'release_branch.sh'\n    script_options: ''\n    workingDir: '~/project/VAMobile'\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"build_ios_release"},(0,l.kt)("inlineCode",{parentName:"h2"},"build_ios_release")),(0,l.kt)("h3",{id:"description-8"},"Description"),(0,l.kt)("p",null,"Reusable command that builds a production version of the app for review by the App Store.\nThe CIRCLE_TAG will be the version number, i.e. 'v1.1.1'"),(0,l.kt)("h3",{id:"image-see-images-8"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"ios"),(0,l.kt)("h3",{id:"steps-8"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- install_deps:\n    environment: 'production'\n- decode_ios_keys\n- install_pods\n- bundle_app:\n    os: 'ios'\n- queue_ios_jobs\n- ios_fastlane:\n    version: ${CIRCLE_TAG}\n    lane: 'review'\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"build_android_release"},(0,l.kt)("inlineCode",{parentName:"h2"},"build_android_release")),(0,l.kt)("h3",{id:"description-9"},"Description"),(0,l.kt)("p",null,"Reusable command that builds a production version of the app for review by the Play Store.\nThe CIRCLE_TAG will be the version number, i.e. 'v1.1.1'"),(0,l.kt)("h3",{id:"image-see-images-9"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"android"),(0,l.kt)("h3",{id:"steps-9"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- install_deps:\n    environment: 'production'\n- create_keys_directory\n- decode_android_keys\n- bundle_app:\n    os: 'android'\n- queue_android_jobs\n- android_fastlane:\n    version: ${CIRCLE_TAG}\n    lane: 'review'\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"run_release_lanes"},(0,l.kt)("inlineCode",{parentName:"h2"},"run_release_lanes")),(0,l.kt)("h3",{id:"description-10"},"Description"),(0,l.kt)("p",null,"This reusable command runs the ",(0,l.kt)("inlineCode",{parentName:"p"},"release")," lanes in the fastfiles in order to release any pending versions that have been approved by the stores. "),(0,l.kt)("h3",{id:"image-see-images-10"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"default"),(0,l.kt)("h3",{id:"steps-10"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- create_keys_directory\n- decode_ios_keys\n- decode_android_keys\n- android_fastlane:\n    lane: 'release'\n    use_slack_thread: false\n- ios_fastlane:\n    lane: 'release'\n    use_slack_thread: false\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"build_android_release_candidate"},(0,l.kt)("inlineCode",{parentName:"h2"},"build_android_release_candidate")),(0,l.kt)("h3",{id:"description-11"},"Description"),(0,l.kt)("p",null,"Reusable job that runs the Android build commands and is configured to build with the special release candidate configurations for the QA team.\nSends all builds to the Development Team track in the Play Store"),(0,l.kt)("h3",{id:"image-see-images-11"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"android"),(0,l.kt)("h3",{id:"steps-11"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- install_deps\n- create_keys_directory\n- decode_android_keys\n- bundle_app:\n    os: 'android'\n- queue_android_jobs\n- android_fastlane:\n    lane: 'rc'\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"build_ios_release_candidate"},(0,l.kt)("inlineCode",{parentName:"h2"},"build_ios_release_candidate")),(0,l.kt)("h3",{id:"description-12"},"Description"),(0,l.kt)("p",null,"Reusable job that runs the iOS build commands and is configured to build with the special release candidate configurations for the QA team.\nSends all builds to the Development Team track in the Test Flight"),(0,l.kt)("h3",{id:"image-see-images-12"},"Image (see ",(0,l.kt)("a",{parentName:"h3",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/CircleCI/Overview/#Images"},"Images"),")"),(0,l.kt)("p",null,"ios"),(0,l.kt)("h3",{id:"steps-12"},"Steps"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"- checkout\n- install_deps\n- decode_ios_keys\n- install_pods\n- bundle_app:\n    os: 'ios'\n- queue_ios_jobs\n- ios_fastlane:\n    lane: 'rc'\n")),(0,l.kt)("hr",null))}u.isMDXComponent=!0}}]);