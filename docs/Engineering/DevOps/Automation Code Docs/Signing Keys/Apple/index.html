<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Apple Signing Keys | VA: Health and Benefits app documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://department-of-veterans-affairs.github.io//va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Apple"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Apple Signing Keys | VA: Health and Benefits app documentation"><meta data-react-helmet="true" name="description" content="Overview"><meta data-react-helmet="true" property="og:description" content="Overview"><link data-react-helmet="true" rel="icon" href="/va-mobile-app/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://department-of-veterans-affairs.github.io//va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Apple"><link data-react-helmet="true" rel="alternate" href="https://department-of-veterans-affairs.github.io//va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Apple" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://department-of-veterans-affairs.github.io//va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Apple" hreflang="x-default"><link rel="stylesheet" href="/va-mobile-app/assets/css/styles.bcff6b04.css">
<link rel="preload" href="/va-mobile-app/assets/js/runtime~main.0f3dac79.js" as="script">
<link rel="preload" href="/va-mobile-app/assets/js/main.c337da7b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/va-mobile-app/"><div class="navbar__logo"><img src="/va-mobile-app/img/va-logo.png" alt="VA Mobile logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/va-mobile-app/img/va-logo.png" alt="VA Mobile logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">VA Mobile Docs</b></a><a class="navbar__item navbar__link navbar__link--active" href="/va-mobile-app/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/department-of-veterans-affairs/va-mobile-app" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/va-mobile-app/docs/intro">Intro to the VA Mobile App</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/va-mobile-app/docs/Product/Intro">Product</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/va-mobile-app/docs/Engineering/Philosphy">Engineering</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/va-mobile-app/docs/Engineering/Philosphy">Engineering Philosophy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/va-mobile-app/docs/Engineering/Releases">Releases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/va-mobile-app/docs/Engineering/Architecture/Auth Diagrams">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/va-mobile-app/docs/Engineering/API/OpenAPI Docs">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/va-mobile-app/docs/Engineering/BackEnd/Architecture/BackgroundWorkers">Back End</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/va-mobile-app/docs/Engineering/FrontEnd/ComponentsSection/Alert and Progress/AccordionCollapsible">Front End</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Apple">DevOps</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Apple">Automation Code Docs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Apple">Signing Keys</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Apple">Apple Signing Keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Firebase">Firebase Signing Keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Google">Google Signing Keys</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/CircleCI/Overview">CircleCI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/GitHub Actions/Overview">GitHub Actions</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Scripts">Scripts, Etc.</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/va-mobile-app/docs/UX/Foundations">UX</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/va-mobile-app/docs/QA/Meetings">QA</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/va-mobile-app/docs/Operations/Dashboard">Operations</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Apple Signing Keys</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">â€‹</a></h2><p>Apple Signing and Distribution keys are obtained through the Apple Developer Portal <a href="https://developer.apple.com/account/resources/certificates/list" target="_blank" rel="noopener noreferrer">Certificates, Identifiers, and Profiles</a></p><p>Developers will each need to have a development certificate created for them, or else a team will need a shared key for each machine. </p><p>Apple and iOS Distribution certificates are limited in the organization. Currently, the Health and Benefits App has its own certificate for Apple Distribution. In the future, it may be that teams have a shared signing path with different provisioning profiles, but at this time it is not necessary.</p><p>Apple Certificates expire every year and need to be renewed. This process is linked below and requires updating both the Certificates&#x27; area in the Developer Portal, and work to update the <a href="https://docs.fastlane.tools/actions/match" target="_blank" rel="noopener noreferrer">Fastlane Match</a> system used to sign apple builds. </p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="fastlane-match-and-apple-signing">Fastlane Match and Apple Signing<a class="hash-link" href="#fastlane-match-and-apple-signing" title="Direct link to heading">â€‹</a></h2><p>Apple Signing in our build system is managed with <!-- -->[Fastlane match]<!-- -->. Match manages and stores the certificates so that a single Distribution certificate can be shared with the team through GitHub authorization to the <a href="https://github.com/department-of-veterans-affairs/va-mobile-app-private" target="_blank" rel="noopener noreferrer">private, encrypted repository</a>.</p><p>Match can be called from a local machine to download the certificates and provisioning profiles for distribution or development. It is also used to sign certificates in the CI during Fastlane scripts. </p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="renewing-certificates">Renewing Certificates<a class="hash-link" href="#renewing-certificates" title="Direct link to heading">â€‹</a></h2><p>In order to renew certificates you will need to delete the old certificates from Apple, as well as delete them from the private key repository. </p><p>In the repository, you will need to delete the following files:</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="provisioning-profile">Provisioning Profile<a class="hash-link" href="#provisioning-profile" title="Direct link to heading">â€‹</a></h4><ul><li><code>/profiles/appstore/&lt;filename&gt;.mobileprovision</code></li><li><code>/certs/distribution/&lt;filename&gt;.cer</code></li><li><code>/certs/distribution/&lt;filename&gt;.p12</code></li></ul><p>You will need to delete the expiring profile and certificates from the Developer Console</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="certificate"><a href="https://developer.apple.com/account/resources/certificates/list" target="_blank" rel="noopener noreferrer">Certificate</a><a class="hash-link" href="#certificate" title="Direct link to heading">â€‹</a></h4><table><thead><tr><th>NAME</th><th>TYPE</th><th>PLATFORM</th><th>CREATED BY</th><th>EXPIRATION</th></tr></thead><tbody><tr><td>US Department of Veterans Affairs (VA)</td><td>Distribution</td><td>All</td><td>Patrick Saxton</td><td>07/13/2023</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_y2LR" id="provisioning-profiles"><a href="https://developer.apple.com/account/resources/profiles/list" target="_blank" rel="noopener noreferrer">Provisioning Profiles</a><a class="hash-link" href="#provisioning-profiles" title="Direct link to heading">â€‹</a></h4><table><thead><tr><th>NAME</th><th>PLATFORM</th><th>TYPE</th><th>EXPIRATION</th></tr></thead><tbody><tr><td>match AppStore gov.va.vamobileapp</td><td>iOS</td><td>App Store</td><td>07/13/2023</td></tr></tbody></table><p>Once the certificates have been deleted from both locations you can <a href="https://docs.fastlane.tools/actions/match/#run" target="_blank" rel="noopener noreferrer">run match in your terminal</a> to renew the certs
navigate to <code>~/VAMobile/ios/fastlane</code> and then run <code>fastlane match appstore</code>. You should be able to follow the prompt to create a new Distribution Certificate and Provisioning Profile that will be uploaded to the private repository and can then be used for signing apps.</p><p>You should be able to test locally by building with the On-demand Script. If the signing part doesn&#x27;t fail before build everything should be good to go. You can PR any file changes that may have happened. </p><p><em>NOTE: You may need to update the configs and profiles in the VAMobile.plist with xCode if the name strings are changed. If you receive a build error about not finding a cert, double check this first</em></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="location-in-the-ci">Location in the CI<a class="hash-link" href="#location-in-the-ci" title="Direct link to heading">â€‹</a></h2><p>Apple certificates are encrypted by Fastlane match into a private repository and fetched at build time. </p><p>On your local machine they can be found in the Keychain Access application.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="env-constants-for-the-keys">ENV Constants for the keys<a class="hash-link" href="#env-constants-for-the-keys" title="Direct link to heading">â€‹</a></h3><p>All keys are stored in match</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="more-documentation">More Documentation<a class="hash-link" href="#more-documentation" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://developer.apple.com/support/code-signing/" target="_blank" rel="noopener noreferrer">Apple Codesigning Documentation</a></li><li><a href="https://docs.fastlane.tools/codesigning/getting-started/" target="_blank" rel="noopener noreferrer">Fastlane Codesigning Documentation</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/va-mobile-app/docs/Engineering/FrontEnd/Testing/UnitTesting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Unit Tests</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Firebase"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Firebase Signing Keys</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#fastlane-match-and-apple-signing" class="table-of-contents__link toc-highlight">Fastlane Match and Apple Signing</a></li><li><a href="#renewing-certificates" class="table-of-contents__link toc-highlight">Renewing Certificates</a></li><li><a href="#location-in-the-ci" class="table-of-contents__link toc-highlight">Location in the CI</a><ul><li><a href="#env-constants-for-the-keys" class="table-of-contents__link toc-highlight">ENV Constants for the keys</a></li></ul></li><li><a href="#more-documentation" class="table-of-contents__link toc-highlight">More Documentation</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/va-mobile-app/docs/intro">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/va-mobile-app/img/va-blue-logo.png" alt="" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/va-mobile-app/img/va-blue-logo.png" alt="" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright">Copyright Â© 2023 VA Mobile App, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/va-mobile-app/assets/js/runtime~main.0f3dac79.js"></script>
<script src="/va-mobile-app/assets/js/main.c337da7b.js"></script>
</body>
</html>